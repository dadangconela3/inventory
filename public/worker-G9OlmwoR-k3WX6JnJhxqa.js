importScripts("https://storage.googleapis.com/workbox-cdn/releases/6.5.4/workbox-sw.js"),workbox.setConfig({debug:!1}),workbox.precaching.precacheAndRoute(self.__WB_MANIFEST||[]),workbox.precaching.cleanupOutdatedCaches(),self.addEventListener("push",function(o){if(console.log("[Service Worker] Push received:",o),o.data)try{var e;const i=o.data.json();console.log("[Service Worker] Push data:",i);const n=i.title||"Notification",t={body:i.body||"",icon:i.icon||"/icons/icon-192x192.png",badge:i.badge||"/icons/icon-96x96.png",data:{url:(null===(e=i.data)||void 0===e?void 0:e.url)||"/dashboard"},vibrate:[200,100,200],tag:"inventory-notification",requireInteraction:!1,actions:i.actions||[],timestamp:Date.now()};o.waitUntil(self.registration.showNotification(n,t).then(()=>console.log("[Service Worker] Notification shown")).catch(o=>console.error("[Service Worker] Error showing notification:",o)))}catch(o){console.error("[Service Worker] Error handling push event:",o)}else console.log("[Service Worker] Push event but no data")}),self.addEventListener("notificationclick",function(o){var e;console.log("[Service Worker] Notification clicked:",o.notification.tag),o.notification.close();const i=(null===(e=o.notification.data)||void 0===e?void 0:e.url)||"/dashboard",n=new URL(i,self.location.origin).href;o.waitUntil(clients.matchAll({type:"window",includeUncontrolled:!0}).then(function(o){for(let e=0;e<o.length;e++){const i=o[e];if(i.url===n&&"focus"in i)return i.focus()}for(let e=0;e<o.length;e++){const i=o[e];if(i.url.startsWith(self.location.origin)&&"focus"in i)return i.focus().then(()=>{if("navigate"in i)return i.navigate(n)})}if(clients.openWindow)return clients.openWindow(n)}))}),self.addEventListener("notificationclose",function(o){console.log("[Service Worker] Notification closed:",o.notification.tag)}),self.addEventListener("activate",o=>{console.log("[Service Worker] Activated"),o.waitUntil(clients.claim())});